services:
  store:
    image: ais
    build: ./
    # ports:
    #   - 0.0.0.0:12345:12345
    network_mode: host
    volumes:
      - ./:/app/
    command: python back.py store

  sync:
    image: ais
    build: ./
    volumes:
      - ./:/app/
    command: python back.py sync

  front:
    image: ais
    build: ./
    ports:
        - 8080:5000
    volumes:
      - ./:/app/
    command: python front.py
    environment:
      - VIRTUAL_HOST
      - LETSENCRYPT_HOST
      - LETSENCRYPT_EMAIL

networks:
  default:
    external:
      name: nginx-proxy
